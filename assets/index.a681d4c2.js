var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(e,o,s)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s,r=(t,r)=>{for(var a in r||(r={}))o.call(r,a)&&n(t,a,r[a]);if(e)for(var a of e(r))s.call(r,a)&&n(t,a,r[a]);return t};import{o as a,c as i,a as u,F as l,r as c,t as d,n as m,p as f,b as p,d as h,e as g,T as k,f as b,g as y,w as v,h as w,i as L}from"./vendor.b45d28a0.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const o of t)if("childList"===o.type)for(const t of o.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const B={props:{time:String,isPaused:Boolean},setup:t=>(e,o)=>(a(),i("button",{class:m("column Timer "+(t.isPaused?"paused":"")),role:"status"},[u("h2",null,[(a(!0),i(l,null,c(Object.entries(t.time.split("")),(([t,e])=>(a(),i("span",{key:t+e},d(e),1)))),128))]),u("p",null,d(t.isPaused?"Paused":"Running"),1)],2)),__scopeId:"data-v-c82834da"};const C={methods:{emit(t){this.$emit(t)}},emits:["close"]};f("data-v-fef1eb44");const P={class:"modal-wrapper column"},S={class:"modal column"},O={class:"row"},F=u("h2",null,"This is a modal",-1),j={class:"controls"};p(),C.render=function(t,e,o,s,n,r){return a(),h(k,{to:"#app-modals"},[u("div",P,[u("div",S,[u("header",O,[g(t.$slots,"header",{},(()=>[F]),{}),u("div",j,[u("button",{type:"button",role:"navigation",onClick:e[0]||(e[0]=t=>r.emit("close"))}," Close ")])]),u("main",null,[g(t.$slots,"body",{},void 0,!0)])]),u("div",{class:"modal-blur-background",onClick:e[1]||(e[1]=t=>r.emit("close"))})])])},C.__scopeId="data-v-fef1eb44";const N={mode:"focus",streaksForLongBreak:4,streak:{time:Date.now(),length:0},durations:{focus:1500,shortBreak:300,longBreak:900}},T=["focus","shortBreak","longBreak"],D=t=>-1!==T.indexOf(t),x=t=>{if("object"!=typeof t.durations)t.durations=r({},N.durations);else{for(const[e,o]in Object.entries(t.durations))D(e)?"number"!=typeof o&&(t.durations[e]=N.durations[e]):delete t.durations[e];for(let e of T)e in t.durations||(t.durations[e]=N.durations[e])}return D(t.mode)||(t.mode="focus",t.timeLeft=t.durations.focus),"object"==typeof t.streak&&"number"==typeof t.streak.time&&"number"==typeof t.streak.length&&Date.now()-t.streak.time<=288e5||(t.streak=r({},N.streak)),"number"!=typeof t.streaksForLongBreak?t.streaksForLongBreak=N.streaksForLongBreak:t.streaksForLongBreak=Math.max(2,Math.min(8,t.streaksForLongBreak)),"number"==typeof t.timeLeft&&t.timeLeft>=0||(t.timeLeft=t.durations[t.mode]),t},A=t=>{t=x(r({},t)),localStorage.setItem("state",JSON.stringify(t))};const I={class:"column"},q=u("h1",null,"Pomodo",-1),M={class:"row status-buttons"},E=u("h2",null,"Settings",-1),R={class:"column settings"},_={class:"column setting"},$=u("h3",null,"Focus timer duration (in minutes)",-1),H=["value"],J={class:"column setting"},z=u("h3",null,"Short break duration (in minutes)",-1),K=["value"],V={class:"column setting"},G=u("h3",null,"Long break duration (in minutes)",-1),Q=["value"];const U=t=>t>9?t.toString():"0"+t;var W=b((()=>{const t=(()=>{const t=localStorage.getItem("state");if(!t)return r({},N);try{return JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return r({},N);throw e}})(),e=x(r(r({},N),t));return A(e),e})()),X=()=>{};const Y={data:()=>({isPaused:!0,areSettingsOpen:!1,durations:W.durations}),computed:{timeLeftString(){var t=Math.floor(W.timeLeft/60/60);return[t||null,Math.floor(W.timeLeft/60%60),Math.floor(W.timeLeft%60)].filter((t=>null!==t)).map(U).join(":")}},methods:{switchTo(t){this.isPaused=!0,W.mode=t,W.timeLeft=W.durations[t],A(W)},buttonClass:t=>t===W.mode?"selected":"",toggle(){this.isPaused=!this.isPaused,this.isPaused||this.startTimer()},timerClicked(){this.toggle(),this.setupNotifications()},startTimer(){const t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setInterval(t,1e3/30));let e=Date.now();const o=()=>{if(!this.isPaused){let s=Date.now()-e;if(W.timeLeft=W.timeLeft-s/1e3,e+=s,W.timeLeft<=0)if("focus"===W.mode){W.streak.length+=1,W.streak.time=Date.now();const t=W.streak.length%W.streaksForLongBreak==0;this.switchTo(t?"longBreak":"shortBreak"),X("Hey, the break is over","It's time to focus on your tasks")}else this.switchTo("focus"),X("Hey, it's time for a break","Relax and collect more energy to work productively during the next pomodoro");A(W),t(o)}};o()},setDuration(t,e){W.durations[t]=60*+e,A(W)},async setupNotifications(){"default"===Notification.permission&&await Notification.requestPermission(),"granted"===Notification.permission&&(X=(t,e)=>{new Notification(t,{body:e,icon:"/favicon.ico",sound:"default"})})}}};L(Object.assign(Y,{setup:function(t){return(t,e)=>(a(),i(l,null,[u("header",I,[q,u("div",M,[u("button",{type:"button",class:m(t.buttonClass("focus")),onClick:e[0]||(e[0]=e=>t.switchTo("focus"))}," Focus ",2),u("button",{type:"button",class:m(t.buttonClass("shortBreak")),onClick:e[1]||(e[1]=e=>t.switchTo("shortBreak"))}," Short Break ",2),u("button",{type:"button",class:m(t.buttonClass("longBreak")),onClick:e[2]||(e[2]=e=>t.switchTo("longBreak"))}," Long Break ",2)])]),y(B,{time:t.timeLeftString,isPaused:t.isPaused,onClick:e[3]||(e[3]=e=>t.timerClicked())},null,8,["time","isPaused"]),u("button",{type:"button",class:"settings-button",onClick:e[4]||(e[4]=t=>this.areSettingsOpen=!0)}," Settings "),this.areSettingsOpen?(a(),h(C,{key:0,onClose:e[8]||(e[8]=t=>this.areSettingsOpen=!1)},{header:v((()=>[E])),body:v((()=>[u("div",R,[u("div",_,[$,u("input",{type:"number",min:"10",max:"120",value:t.durations.focus/60,onChange:e[5]||(e[5]=e=>t.setDuration("focus",e.target.value))},null,40,H)]),u("div",J,[z,u("input",{type:"number",min:"5",max:"15",value:t.durations.shortBreak/60,onChange:e[6]||(e[6]=e=>t.setDuration("shortBreak",e.target.value))},null,40,K)]),u("div",V,[G,u("input",{type:"number",min:"10",max:"60",value:t.durations.longBreak/60,onChange:e[7]||(e[7]=e=>t.setDuration("longBreak",e.target.value))},null,40,Q)])])])),_:1})):w("",!0)],64))}})).mount("#app"),(()=>{const t=document.createElement("meta");document.head.appendChild(t);const e=()=>{t.setAttribute("name","theme-color"),t.setAttribute("content",getComputedStyle(document.documentElement).getPropertyValue("--background"))};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),e()})();
