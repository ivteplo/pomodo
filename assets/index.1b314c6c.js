var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,a)=>{for(var r in a||(a={}))o.call(a,r)&&s(t,r,a[r]);if(e)for(var r of e(a))n.call(a,r)&&s(t,r,a[r]);return t};import{o as r,c as i,a as u,F as l,r as c,t as d,n as m,p as f,b as g,d as p,e as h,w as k,f as b,m as y,g as w,T as v,h as S,i as B,j as L,v as D,k as O,l as P}from"./vendor.21c4ec5c.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const o of t)if("childList"===o.type)for(const t of o.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const C={props:{time:String,isPaused:Boolean},setup:t=>(e,o)=>(r(),i("button",{class:m("column Timer "+(t.isPaused?"paused":"")),role:"status"},[u("h2",null,[(r(!0),i(l,null,c(Object.entries(t.time.split("")),(([t,e])=>(r(),i("span",{key:t+e},d(e),1)))),128))]),u("p",null,d(t.isPaused?"Paused":"Running"),1)],2)),__scopeId:"data-v-7f57b181"};const F={methods:{close(){this.$emit("close")}},emits:["close"],props:["isOpen"]};f("data-v-ec732a2c");const N={class:"modal column"},j={class:"row"},T=u("span",null,null,-1),M={class:"controls"};g(),F.render=function(t,e,o,n,s,a){return r(),p(S,{to:"#app-modals"},[h(v,{name:"fade"},{default:k((()=>[o.isOpen?(r(),i("div",y({key:0,class:"modal-wrapper column"},t.$attrs),[u("div",N,[u("header",j,[b(t.$slots,"header",{},(()=>[T]),{}),u("div",M,[u("button",{type:"button",role:"navigation",onClick:e[0]||(e[0]=t=>a.close())}," Close ")])]),u("main",null,[b(t.$slots,"body",{},void 0,!0)])]),u("div",{class:"modal-blur-background",onClick:e[1]||(e[1]=t=>a.close())})],16)):w("",!0)])),_:3})])},F.__scopeId="data-v-ec732a2c";const x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setInterval(t,1e3/30)),A={mode:"focus",streaksForLongBreak:4,streak:{time:Date.now(),length:0},durations:{focus:1500,shortBreak:300,longBreak:900}},I=["focus","shortBreak","longBreak"],q=t=>-1!==I.indexOf(t),E=t=>{if("object"!=typeof t.durations)t.durations=a({},A.durations);else{for(let[e,o]of Object.entries(t.durations))o=Math.round(o),q(e)?t.durations[e]="number"==typeof o&&o>=60&&o<=7200?o:A.durations[e]:delete t.durations[e];for(let e of I)e in t.durations||(t.durations[e]=A.durations[e])}return q(t.mode)||(t.mode="focus",t.timeLeft=t.durations.focus),"object"==typeof t.streak&&"number"==typeof t.streak.time&&"number"==typeof t.streak.length&&Date.now()-t.streak.time<=288e5||(t.streak=a({},A.streak)),"number"!=typeof t.streaksForLongBreak?t.streaksForLongBreak=A.streaksForLongBreak:t.streaksForLongBreak=Math.max(2,Math.min(8,t.streaksForLongBreak)),"number"==typeof t.timeLeft&&t.timeLeft>=0||(t.timeLeft=t.durations[t.mode]),t},R=t=>{t=E(a({},t)),localStorage.setItem("state",JSON.stringify(t))};const _={class:"column"},V=u("h1",null,"Pomodo",-1),$={class:"row status-buttons"},U=u("h2",null,"Settings",-1),H={class:"column settings"},J={class:"column setting"},z=u("h3",null,"Focus timer duration (in minutes)",-1),K={class:"column setting"},G=u("h3",null,"Short break duration (in minutes)",-1),Q={class:"column setting"},W=u("h3",null,"Long break duration (in minutes)",-1);const X=t=>t>9?t.toString():"0"+t;var Y=B((()=>{const t=(()=>{const t=localStorage.getItem("state");if(!t)return a({},A);try{return JSON.parse(t)}catch(e){if(e instanceof SyntaxError)return a({},A);throw e}})(),e=E(a(a({},A),t));return R(e),e})()),Z=()=>{};const tt={data:()=>({isPaused:!0,areSettingsOpen:!1,focusDurationSetting:Y.durations.focus/60,shortBreakDurationSetting:Y.durations.shortBreak/60,longBreakDurationSetting:Y.durations.longBreak/60}),computed:{timeLeftString(){var t=Math.floor(Y.timeLeft/60/60);return[t||null,Math.floor(Y.timeLeft/60%60),Math.floor(Y.timeLeft%60)].filter((t=>null!==t)).map(X).join(":")}},methods:{switchTo(t){this.isPaused=!0,Y.mode=t,Y.timeLeft=Y.durations[t],R(Y)},buttonClass:t=>t===Y.mode?"selected":"",toggle(){this.isPaused=!this.isPaused,this.isPaused||this.startTimer()},timerClicked(){this.toggle(),this.setupNotifications()},startTimer(){let t=Date.now();const e=()=>{if(!this.isPaused){let o=Date.now()-t;if(Y.timeLeft=Y.timeLeft-o/1e3,t+=o,Y.timeLeft<=0)if("focus"===Y.mode){Y.streak.length+=1,Y.streak.time=Date.now();const t=Y.streak.length%Y.streaksForLongBreak==0;this.switchTo(t?"longBreak":"shortBreak"),Z("Hey, it's time for a break","Relax and collect more energy to work productively during the next pomodoro")}else this.switchTo("focus"),Z("Hey, the break is over","It's time to focus on your tasks");R(Y),x(e)}};e()},setDuration(t,e){isNaN(e)||(e>=1&&e<=120&&(t===Y.mode&&Y.timeLeft===Y.durations[t]&&this.isPaused&&(Y.timeLeft=60*+e),Y.durations[t]=60*+Math.round(e)),this[t+"DurationSetting"]=Y.durations[t]/60,R(Y))},async setupNotifications(){"default"===Notification.permission&&await Notification.requestPermission(),"granted"===Notification.permission&&(Z=(t,e)=>{new Notification(t,{body:e,icon:"/favicon.ico",sound:"default"})})}}};P(Object.assign(tt,{setup:function(t){return(t,e)=>(r(),i(l,null,[u("header",_,[V,u("div",$,[u("button",{type:"button",class:m(t.buttonClass("focus")),onClick:e[0]||(e[0]=e=>t.switchTo("focus"))}," Focus ",2),u("button",{type:"button",class:m(t.buttonClass("shortBreak")),onClick:e[1]||(e[1]=e=>t.switchTo("shortBreak"))}," Short Break ",2),u("button",{type:"button",class:m(t.buttonClass("longBreak")),onClick:e[2]||(e[2]=e=>t.switchTo("longBreak"))}," Long Break ",2)])]),h(C,{time:t.timeLeftString,isPaused:t.isPaused,onClick:e[3]||(e[3]=e=>t.timerClicked())},null,8,["time","isPaused"]),u("button",{type:"button",class:"settings-button",onClick:e[4]||(e[4]=e=>t.areSettingsOpen=!0)}," Settings "),h(F,{isOpen:t.areSettingsOpen,onClose:e[11]||(e[11]=e=>t.areSettingsOpen=!1)},{header:k((()=>[U])),body:k((()=>[u("div",H,[u("div",J,[z,L(u("input",{type:"number",min:"10",max:"120","onUpdate:modelValue":e[5]||(e[5]=t=>O(focusDurationSetting)?focusDurationSetting.value=t:null),onChange:e[6]||(e[6]=e=>t.setDuration("focus",+e.target.value))},null,544),[[D,t.focusDurationSetting]])]),u("div",K,[G,L(u("input",{type:"number",min:"5",max:"15","onUpdate:modelValue":e[7]||(e[7]=t=>O(shortBreakDurationSetting)?shortBreakDurationSetting.value=t:null),onChange:e[8]||(e[8]=e=>t.setDuration("shortBreak",+e.target.value))},null,544),[[D,t.shortBreakDurationSetting]])]),u("div",Q,[W,L(u("input",{type:"number",min:"10",max:"60","onUpdate:modelValue":e[9]||(e[9]=t=>O(longBreakDurationSetting)?longBreakDurationSetting.value=t:null),onChange:e[10]||(e[10]=e=>t.setDuration("longBreak",+e.target.value))},null,544),[[D,t.longBreakDurationSetting]])])])])),_:1},8,["isOpen"])],64))}})).mount("#app"),(()=>{const t=document.createElement("meta");document.head.appendChild(t);const e=()=>{t.setAttribute("name","theme-color"),t.setAttribute("content",getComputedStyle(document.documentElement).getPropertyValue("--background"))};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),e()})();
